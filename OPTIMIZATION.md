# Dashboard 优化说明

## 优化内容

### 1. 加载体验优化
- **问题**: 每次自动刷新都会显示 2 秒的 loading 状态，影响用户体验
- **解决方案**: 
  - 只在首次加载时显示全屏 loading
  - 后续自动刷新时静默更新数据，不显示 loading
  - 添加"最后更新时间"显示，让用户知道数据是最新的
  - 添加手动刷新按钮，方便用户主动刷新

### 2. 可配置刷新频率
- **新增配置项**: `refresh_interval` (刷新间隔)
- **可选范围**: 1-30 秒
- **默认值**: 3 秒
- **位置**: 配置页面 → 刷新间隔
- **说明**: 
  - 较短的间隔（1-3秒）：更实时的监控，但增加服务器负载
  - 中等间隔（5-10秒）：平衡实时性和性能
  - 较长间隔（15-30秒）：减少服务器负载，适合长期监控

### 3. 动态刷新间隔
- 配置更改后立即生效，无需刷新页面
- 使用 Vue 的 `watch` 监听配置变化
- 自动重新设置定时器

## 使用方法

1. 访问"配置"页面
2. 调整"刷新间隔"滑块（1-30秒）
3. 点击"保存配置"
4. 返回仪表盘，新的刷新间隔立即生效

## 技术实现

```javascript
// 只在首次加载显示 loading
if (isFirstLoad.value) {
  loading.value = true
}

// 后续刷新不显示 loading
if (isFirstLoad.value) {
  loading.value = false
  isFirstLoad.value = false
}

// 动态调整刷新间隔
watch(() => configStore.config.refresh_interval, () => {
  startAutoRefresh()
})
```

## 性能提升

- 减少了不必要的 UI 闪烁
- 用户体验更流畅
- 可根据实际需求调整刷新频率
- 降低了服务器负载（可配置）
