# Web ç»ˆç«¯ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Web ç»ˆç«¯ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šç”¨æˆ·ã€å¤šä¼šè¯ã€è·¨è®¾å¤‡è®¿é—®å’Œåå°æŒç»­è¿è¡Œã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ” è®¤è¯ä¸å®‰å…¨
- **JWT è®¤è¯** - å®‰å…¨çš„ Token è®¤è¯æœºåˆ¶
- **ç”¨æˆ·éš”ç¦»** - æ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„ä¼šè¯
- **å¯†ç åŠ å¯†** - ä½¿ç”¨ bcrypt åŠ å¯†å­˜å‚¨å¯†ç 

### ğŸ“± ä¼šè¯ç®¡ç†
- **å¤šä¼šè¯æ”¯æŒ** - åˆ›å»ºã€å‘½åã€åˆ‡æ¢å¤šä¸ªç»ˆç«¯ä¼šè¯
- **ä¼šè¯æŒä¹…åŒ–** - æ‰€æœ‰ä¼šè¯æ•°æ®ä¿å­˜åˆ° SQLite æ•°æ®åº“
- **ä¼šè¯è¶…æ—¶æ§åˆ¶** - å¯é…ç½®è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤ 7 å¤©ï¼‰
- **å”¯ä¸€å‘½åéªŒè¯** - å®æ—¶æ£€æŸ¥ä¼šè¯åç§°æ˜¯å¦é‡å¤

### âš¡ åå°è¿è¡Œ
- **ç‹¬ç«‹åå°çº¿ç¨‹** - ä¼šè¯åœ¨æœåŠ¡ç«¯ç‹¬ç«‹è¿è¡Œï¼Œä¸ä¾èµ–å®¢æˆ·ç«¯è¿æ¥
- **é•¿æ—¶é—´ä»»åŠ¡æ”¯æŒ** - æ”¯æŒå‡ åå°æ—¶çš„åå°ä»»åŠ¡æ‰§è¡Œ
- **è‡ªåŠ¨ä¿å­˜** - æ¯ 5 ç§’è‡ªåŠ¨ä¿å­˜è¾“å‡ºåˆ°æ•°æ®åº“
- **å®Œæ•´è¾“å‡ºç¼“å­˜** - é‡è¿æ—¶æ¢å¤æ‰€æœ‰å†å²è¾“å‡º

### ğŸŒ å¤šå®¢æˆ·ç«¯åä½œ
- **å®æ—¶åŒæ­¥** - å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥åŒä¸€ä¼šè¯ï¼Œå®æ—¶åŒæ­¥è¾“å‡º
- **ç‹¬ç«‹è¿½è¸ª** - æ¯ä¸ªå®¢æˆ·ç«¯ç‹¬ç«‹è¿½è¸ªè¯»å–ä½ç½®
- **å®¢æˆ·ç«¯è®¡æ•°** - å®æ—¶æ˜¾ç¤ºè¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡
- **è·¨è®¾å¤‡è®¿é—®** - åœ¨ä»»ä½•è®¾å¤‡ä¸Šè®¿é—®ç›¸åŒçš„ä¼šè¯

### ğŸ”„ ç½‘ç»œå¯é æ€§
- **è‡ªåŠ¨é‡è¿** - ç½‘ç»œæ–­å¼€åè‡ªåŠ¨é‡è¿ï¼ˆæœ€å¤š 5 æ¬¡ï¼‰
- **å¿ƒè·³æœºåˆ¶** - æ¯ 30 ç§’å‘é€å¿ƒè·³ä¿æŒè¿æ¥
- **æ–­çº¿æ¢å¤** - é‡è¿åè‡ªåŠ¨æ¢å¤å®Œæ•´å†å²è¾“å‡º
- **WebSocket ä¼˜åŒ–** - é«˜æ•ˆçš„åŒå‘é€šä¿¡

### ğŸ¨ ç»ˆç«¯ä½“éªŒ
- **å…¨å±æ¨¡å¼** - ä¸€é”®å…¨å±ï¼ŒESC é€€å‡º
- **äº¤äº’å¼ CLI å®Œç¾æ”¯æŒ** - vim, nano, htop, less, tmux, Claude Code ç­‰
- **Unicode 11 æ”¯æŒ** - æ­£ç¡®æ¸²æŸ“ box-drawing å­—ç¬¦å’Œç‰¹æ®Šç¬¦å·
- **WebGL åŠ é€Ÿ** - ä½¿ç”¨ WebGL æ¸²æŸ“æå‡æ€§èƒ½
- **ä¸»é¢˜åˆ‡æ¢** - æ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜
- **å­—ä½“å¤§å°è°ƒæ•´** - 10-24px å¯è°ƒ

### ğŸ“Š ç³»ç»Ÿç›‘æ§
- **å®æ—¶ç³»ç»Ÿä¿¡æ¯** - CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œä½¿ç”¨æƒ…å†µ
- **è‡ªåŠ¨åˆ·æ–°** - å¯é…ç½®åˆ·æ–°é—´éš”ï¼ˆ1-30 ç§’ï¼‰
- **è¿è¡Œæ—¶é—´ç»Ÿè®¡** - æ˜¾ç¤ºç³»ç»Ÿè¿è¡Œæ—¶é—´
- **èµ„æºä½¿ç”¨å¯è§†åŒ–** - è¿›åº¦æ¡å’Œå›¾è¡¨å±•ç¤º

### âš™ï¸ é…ç½®ç®¡ç†
- **ç»ˆç«¯é…ç½®** - å­—ä½“å¤§å°ã€ä¸»é¢˜ã€é»˜è®¤è·¯å¾„ã€Shell ç±»å‹
- **ä¼šè¯é…ç½®** - è¶…æ—¶æ—¶é—´ã€ç¼“å­˜è¡Œæ•°
- **ç³»ç»Ÿé…ç½®** - åˆ·æ–°é—´éš”
- **å®æ—¶ç”Ÿæ•ˆ** - é…ç½®æ›´æ”¹ç«‹å³ç”Ÿæ•ˆ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.11+
- Node.js 16+
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
# åç«¯
cd backend
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# å‰ç«¯
cd frontend
npm install
```

### å¯åŠ¨æœåŠ¡

```bash
# ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
chmod +x start.sh
./start.sh

# æˆ–åˆ†åˆ«å¯åŠ¨
# åç«¯
cd backend && source venv/bin/activate && uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# å‰ç«¯
cd frontend && npm run dev
```

### è®¿é—®ç³»ç»Ÿ

- **å‰ç«¯ç•Œé¢ï¼š** http://localhost:5173
- **åç«¯ APIï¼š** http://localhost:8000
- **API æ–‡æ¡£ï¼š** http://localhost:8000/docs

### é»˜è®¤è´¦å·

- **ç”¨æˆ·åï¼š** `admin`
- **å¯†ç ï¼š** `admin123`

> âš ï¸ **å®‰å…¨æç¤ºï¼š** ç”Ÿäº§ç¯å¢ƒè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

## ğŸ“š æŠ€æœ¯æ ˆ

**åç«¯:**
- FastAPI (Python 3.11+)
- SQLAlchemy + SQLite
- WebSocket + PTY

**å‰ç«¯:**
- Vue 3 + Vite
- Ant Design Vue
- xterm.js + Pinia

## ğŸ“– æ–‡æ¡£

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ [PROJECT_DOCUMENTATION.md](PROJECT_DOCUMENTATION.md)

åŒ…å«å†…å®¹ï¼š
- å®Œæ•´åŠŸèƒ½è¯´æ˜
- API æ¥å£æ–‡æ¡£
- æ¶æ„è®¾è®¡
- é…ç½®è¯´æ˜
- æ•…éšœæ’æŸ¥
- éƒ¨ç½²æŒ‡å—

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### é•¿æ—¶é—´ä»»åŠ¡
```bash
# å¯åŠ¨ç¼–è¯‘ä»»åŠ¡ï¼ˆéœ€è¦å‡ å°æ—¶ï¼‰
./build.sh

# å…³é—­æµè§ˆå™¨ï¼Œä»»åŠ¡ç»§ç»­è¿è¡Œ
# éšæ—¶é‡æ–°è¿æ¥æŸ¥çœ‹è¿›åº¦
```

### å¤šäººåä½œ
```bash
# ç”¨æˆ· A: å¯åŠ¨è°ƒè¯•ä¼šè¯
tail -f /var/log/app.log

# ç”¨æˆ· B: è¿æ¥åŒä¸€ä¼šè¯
# ä¸¤äººåŒæ—¶çœ‹åˆ°ç›¸åŒçš„æ—¥å¿—
```

### è·¨è®¾å¤‡å·¥ä½œ
```bash
# åŠå…¬å®¤: å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# å›å®¶å: åœ¨å®¶é‡Œç”µè„‘ä¸Šç»§ç»­å·¥ä½œ
# æ— ç¼åˆ‡æ¢ï¼Œå®Œæ•´å†å²
```

## ğŸ”§ é…ç½®

ç¼–è¾‘ `backend/terminal_config.json`:

```json
{
  "session_timeout": 604800,  // ä¼šè¯è¶…æ—¶ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 7 å¤©
  "buffer_size": 5000,         // ç¼“å­˜è¡Œæ•°ï¼Œé»˜è®¤ 5000 è¡Œ
  "font_size": 14,             // å­—ä½“å¤§å°
  "theme": "dark",             // ä¸»é¢˜ï¼šdark/light
  "default_path": "~",         // é»˜è®¤å·¥ä½œç›®å½•
  "refresh_interval": 3        // ä»ªè¡¨ç›˜åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰
}
```

**é…ç½®è¯´æ˜ï¼š**
- `session_timeout`: ä¼šè¯åœ¨æ— æ´»åŠ¨åä¿æŒçš„æ—¶é—´ï¼Œè¶…æ—¶åè‡ªåŠ¨æ¸…ç†
- `buffer_size`: æ¯ä¸ªä¼šè¯ç¼“å­˜çš„æœ€å¤§è¾“å‡ºè¡Œæ•°ï¼Œå½±å“å†…å­˜å ç”¨
- `font_size`: ç»ˆç«¯å­—ä½“å¤§å°ï¼ŒèŒƒå›´ 10-24
- `theme`: ç»ˆç«¯ä¸»é¢˜ï¼Œæ”¯æŒ darkï¼ˆæ·±è‰²ï¼‰å’Œ lightï¼ˆæµ…è‰²ï¼‰
- `default_path`: æ–°å»ºç»ˆç«¯æ—¶çš„é»˜è®¤å·¥ä½œç›®å½•ï¼Œæ”¯æŒ `~` è¡¨ç¤ºç”¨æˆ·ä¸»ç›®å½•
- `refresh_interval`: ç³»ç»Ÿä»ªè¡¨ç›˜æ•°æ®åˆ·æ–°é—´éš”ï¼ŒèŒƒå›´ 1-30 ç§’

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### æ–¹å¼ 1ï¼šä¼ ç»Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. å‡†å¤‡æœåŠ¡å™¨

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…ä¾èµ–
sudo apt install -y python3.11 python3.11-venv python3-pip nodejs npm nginx
```

#### 2. éƒ¨ç½²åç«¯

```bash
# åˆ›å»ºåº”ç”¨ç›®å½•
sudo mkdir -p /opt/web-terminal
sudo chown $USER:$USER /opt/web-terminal
cd /opt/web-terminal

# å…‹éš†ä»£ç 
git clone <your-repo-url> .

# å®‰è£…åç«¯ä¾èµ–
cd backend
python3.11 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
nano .env  # ä¿®æ”¹ SECRET_KEY ç­‰é…ç½®

# ä½¿ç”¨ Gunicorn è¿è¡Œï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
pip install gunicorn
gunicorn app.main:app \
  --workers 4 \
  --worker-class uvicorn.workers.UvicornWorker \
  --bind 0.0.0.0:8000 \
  --daemon \
  --access-logfile /var/log/web-terminal-access.log \
  --error-logfile /var/log/web-terminal-error.log
```

#### 3. éƒ¨ç½²å‰ç«¯

```bash
# æ„å»ºå‰ç«¯
cd /opt/web-terminal/frontend
npm install
npm run build

# å‰ç«¯æ–‡ä»¶å°†ç”Ÿæˆåœ¨ dist/ ç›®å½•
```

#### 4. é…ç½® Nginx

åˆ›å»º Nginx é…ç½®æ–‡ä»¶ `/etc/nginx/sites-available/web-terminal`:

```nginx
server {
    listen 80;
    server_name your-domain.com;  # ä¿®æ”¹ä¸ºä½ çš„åŸŸå
    
    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /opt/web-terminal/frontend/dist;
        try_files $uri $uri/ /index.html;
        
        # ç¼“å­˜é™æ€èµ„æº
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
    }
    
    # åç«¯ API
    location /api/ {
        proxy_pass http://localhost:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # WebSocket è¶…æ—¶è®¾ç½®
        proxy_read_timeout 86400;
        proxy_send_timeout 86400;
    }
    
    # æ—¥å¿—
    access_log /var/log/nginx/web-terminal-access.log;
    error_log /var/log/nginx/web-terminal-error.log;
}
```

å¯ç”¨é…ç½®ï¼š

```bash
# åˆ›å»ºè½¯é“¾æ¥
sudo ln -s /etc/nginx/sites-available/web-terminal /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl restart nginx
```

#### 5. é…ç½® HTTPSï¼ˆå¯é€‰ä½†æ¨èï¼‰

ä½¿ç”¨ Let's Encrypt å…è´¹è¯ä¹¦ï¼š

```bash
# å®‰è£… Certbot
sudo apt install -y certbot python3-certbot-nginx

# è·å–è¯ä¹¦å¹¶è‡ªåŠ¨é…ç½® Nginx
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
```

#### 6. é…ç½® Systemd æœåŠ¡

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/web-terminal.service`:

```ini
[Unit]
Description=Web Terminal Backend
After=network.target

[Service]
Type=notify
User=www-data
Group=www-data
WorkingDirectory=/opt/web-terminal/backend
Environment="PATH=/opt/web-terminal/backend/venv/bin"
ExecStart=/opt/web-terminal/backend/venv/bin/gunicorn app.main:app \
  --workers 4 \
  --worker-class uvicorn.workers.UvicornWorker \
  --bind 0.0.0.0:8000 \
  --access-logfile /var/log/web-terminal-access.log \
  --error-logfile /var/log/web-terminal-error.log
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯ç”¨æœåŠ¡ï¼š

```bash
# é‡è½½ systemd
sudo systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
sudo systemctl start web-terminal

# å¼€æœºè‡ªå¯
sudo systemctl enable web-terminal

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status web-terminal
```

### æ–¹å¼ 2ï¼šDocker éƒ¨ç½²

#### 1. åˆ›å»º Dockerfile

**åç«¯ Dockerfile** (`backend/Dockerfile`):

```dockerfile
FROM python:3.11-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    gcc \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£… Python ä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 8000

# å¯åŠ¨å‘½ä»¤
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

**å‰ç«¯ Dockerfile** (`frontend/Dockerfile`):

```dockerfile
FROM node:18-alpine as builder

WORKDIR /app

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY package*.json ./

# å®‰è£…ä¾èµ–
RUN npm ci

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»º
RUN npm run build

# ç”Ÿäº§é•œåƒ
FROM nginx:alpine

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=builder /app/dist /usr/share/nginx/html

# å¤åˆ¶ Nginx é…ç½®
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

**Nginx é…ç½®** (`frontend/nginx.conf`):

```nginx
server {
    listen 80;
    server_name localhost;
    
    root /usr/share/nginx/html;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    location /api/ {
        proxy_pass http://backend:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

#### 2. åˆ›å»º docker-compose.yml

```yaml
version: '3.8'

services:
  backend:
    build: ./backend
    container_name: web-terminal-backend
    ports:
      - "8000:8000"
    volumes:
      - ./backend/terminal_sessions.db:/app/terminal_sessions.db
      - ./backend/terminal_config.json:/app/terminal_config.json
    environment:
      - SECRET_KEY=${SECRET_KEY:-your-secret-key-change-in-production}
    restart: unless-stopped
    networks:
      - web-terminal-network
  
  frontend:
    build: ./frontend
    container_name: web-terminal-frontend
    ports:
      - "80:80"
    depends_on:
      - backend
    restart: unless-stopped
    networks:
      - web-terminal-network

networks:
  web-terminal-network:
    driver: bridge
```

#### 3. å¯åŠ¨å®¹å™¨

```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart
```

### æ–¹å¼ 3ï¼šäº‘å¹³å°éƒ¨ç½²

#### AWS éƒ¨ç½²

1. **ä½¿ç”¨ EC2 + RDS**
   - åœ¨ EC2 ä¸Šéƒ¨ç½²åº”ç”¨ï¼ˆå‚è€ƒä¼ ç»Ÿéƒ¨ç½²ï¼‰
   - ä½¿ç”¨ RDS PostgreSQL æ›¿ä»£ SQLite
   - é…ç½® Security Group å¼€æ”¾ 80/443 ç«¯å£
   - ä½¿ç”¨ Elastic IP å›ºå®š IP åœ°å€

2. **ä½¿ç”¨ ECS + Fargate**
   - æ„å»º Docker é•œåƒæ¨é€åˆ° ECR
   - åˆ›å»º ECS ä»»åŠ¡å®šä¹‰
   - é…ç½® Application Load Balancer
   - ä½¿ç”¨ EFS æŒä¹…åŒ–æ•°æ®

#### é˜¿é‡Œäº‘éƒ¨ç½²

1. **ä½¿ç”¨ ECS + RDS**
   - è´­ä¹° ECS å®ä¾‹
   - é…ç½®å®‰å…¨ç»„è§„åˆ™
   - éƒ¨ç½²åº”ç”¨ï¼ˆå‚è€ƒä¼ ç»Ÿéƒ¨ç½²ï¼‰
   - ä½¿ç”¨ RDS MySQL å­˜å‚¨æ•°æ®

2. **ä½¿ç”¨å®¹å™¨æœåŠ¡ ACK**
   - åˆ›å»º Kubernetes é›†ç¾¤
   - éƒ¨ç½²åº”ç”¨åˆ° K8s
   - é…ç½® Ingress å’Œè´Ÿè½½å‡è¡¡
   - ä½¿ç”¨ NAS æŒä¹…åŒ–æ•°æ®

### å®‰å…¨åŠ å›º

#### 1. ä¿®æ”¹é»˜è®¤å¯†ç 

ç¼–è¾‘ `backend/app/models/user.py`ï¼Œä½¿ç”¨ä»¥ä¸‹è„šæœ¬ç”Ÿæˆæ–°å¯†ç å“ˆå¸Œï¼š

```python
import bcrypt

password = "your-new-password"
hashed = bcrypt.hashpw(password.encode('utf-8'), bcrypt.gensalt()).decode('utf-8')
print(hashed)
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `backend/.env` æ–‡ä»¶ï¼š

```bash
SECRET_KEY=your-very-long-random-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440
DATABASE_URL=sqlite:///./terminal_sessions.db
```

#### 3. é…ç½®é˜²ç«å¢™

```bash
# åªå¼€æ”¾å¿…è¦ç«¯å£
sudo ufw allow 22/tcp   # SSH
sudo ufw allow 80/tcp   # HTTP
sudo ufw allow 443/tcp  # HTTPS
sudo ufw enable
```

#### 4. é…ç½® CORS

ç¼–è¾‘ `backend/app/main.py`ï¼Œé™åˆ¶å…è®¸çš„åŸŸåï¼š

```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=["https://your-domain.com"],  # ä¿®æ”¹ä¸ºä½ çš„åŸŸå
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. æ•°æ®åº“ä¼˜åŒ–

```bash
# å®šæœŸæ¸…ç†è¿‡æœŸä¼šè¯
sqlite3 backend/terminal_sessions.db "DELETE FROM terminal_sessions WHERE is_active = 0 AND last_activity < strftime('%s', 'now') - 604800;"

# ä¼˜åŒ–æ•°æ®åº“
sqlite3 backend/terminal_sessions.db "VACUUM;"
```

#### 2. æ—¥å¿—è½®è½¬

åˆ›å»º `/etc/logrotate.d/web-terminal`:

```
/var/log/web-terminal-*.log {
    daily
    rotate 7
    compress
    delaycompress
    notifempty
    create 0640 www-data www-data
    sharedscripts
    postrotate
        systemctl reload web-terminal
    endscript
}
```

#### 3. ç›‘æ§å‘Šè­¦

ä½¿ç”¨ Prometheus + Grafana ç›‘æ§ç³»ç»Ÿèµ„æºï¼š

```bash
# å®‰è£… node_exporter
wget https://github.com/prometheus/node_exporter/releases/download/v1.7.0/node_exporter-1.7.0.linux-amd64.tar.gz
tar xvfz node_exporter-1.7.0.linux-amd64.tar.gz
sudo mv node_exporter-1.7.0.linux-amd64/node_exporter /usr/local/bin/
sudo useradd -rs /bin/false node_exporter

# åˆ›å»º systemd æœåŠ¡
sudo nano /etc/systemd/system/node_exporter.service
```

### å¤‡ä»½ç­–ç•¥

#### 1. æ•°æ®åº“å¤‡ä»½

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > /opt/backup-terminal.sh << 'EOF'
#!/bin/bash
BACKUP_DIR="/opt/backups/web-terminal"
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p $BACKUP_DIR

# å¤‡ä»½æ•°æ®åº“
cp /opt/web-terminal/backend/terminal_sessions.db $BACKUP_DIR/terminal_sessions_$DATE.db

# å¤‡ä»½é…ç½®
cp /opt/web-terminal/backend/terminal_config.json $BACKUP_DIR/terminal_config_$DATE.json

# åˆ é™¤ 7 å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "*.db" -mtime +7 -delete
find $BACKUP_DIR -name "*.json" -mtime +7 -delete

echo "Backup completed: $DATE"
EOF

chmod +x /opt/backup-terminal.sh

# æ·»åŠ åˆ° crontabï¼ˆæ¯å¤©å‡Œæ™¨ 2 ç‚¹å¤‡ä»½ï¼‰
(crontab -l 2>/dev/null; echo "0 2 * * * /opt/backup-terminal.sh") | crontab -
```

#### 2. æ¢å¤æ•°æ®

```bash
# åœæ­¢æœåŠ¡
sudo systemctl stop web-terminal

# æ¢å¤æ•°æ®åº“
cp /opt/backups/web-terminal/terminal_sessions_YYYYMMDD_HHMMSS.db /opt/web-terminal/backend/terminal_sessions.db

# æ¢å¤é…ç½®
cp /opt/backups/web-terminal/terminal_config_YYYYMMDD_HHMMSS.json /opt/web-terminal/backend/terminal_config.json

# å¯åŠ¨æœåŠ¡
sudo systemctl start web-terminal
```

### æ•…éšœæ’æŸ¥

#### æŸ¥çœ‹æ—¥å¿—

```bash
# åç«¯æ—¥å¿—
tail -f /var/log/web-terminal-error.log

# Nginx æ—¥å¿—
tail -f /var/log/nginx/web-terminal-error.log

# Systemd æ—¥å¿—
sudo journalctl -u web-terminal -f

# Docker æ—¥å¿—
docker-compose logs -f backend
```

#### å¸¸è§é—®é¢˜

1. **WebSocket è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ Nginx é…ç½®æ˜¯å¦æ”¯æŒ WebSocket
   - ç¡®è®¤é˜²ç«å¢™è§„åˆ™
   - æŸ¥çœ‹åç«¯æ—¥å¿—

2. **ä¼šè¯æ— æ³•ä¿å­˜**
   - æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
   - ç¡®è®¤ç£ç›˜ç©ºé—´å……è¶³
   - æŸ¥çœ‹åç«¯é”™è¯¯æ—¥å¿—

3. **æ€§èƒ½é—®é¢˜**
   - å¢åŠ  Gunicorn workers æ•°é‡
   - ä¼˜åŒ–æ•°æ®åº“ï¼ˆVACUUMï¼‰
   - æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

## ğŸ› æ•…éšœæ’æŸ¥

### å¼€å‘ç¯å¢ƒ

#### è¾“å…¥æ— å“åº”
- æ£€æŸ¥ WebSocket è¿æ¥çŠ¶æ€ï¼ˆæµè§ˆå™¨å¼€å‘è€…å·¥å…· â†’ Network â†’ WSï¼‰
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- æ£€æŸ¥åç«¯æ—¥å¿—è¾“å‡º

#### è¾“å‡ºä¸åŒæ­¥
- åˆ·æ–°é¡µé¢é‡æ–°è¿æ¥
- æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦ç¨³å®š
- æŸ¥çœ‹å®¢æˆ·ç«¯æ•°é‡æ˜¯å¦æ­£å¸¸

#### ä¼šè¯ä¸¢å¤±
- æ£€æŸ¥ä¼šè¯è¶…æ—¶è®¾ç½®ï¼ˆé»˜è®¤ 7 å¤©ï¼‰
- æŸ¥çœ‹æ•°æ®åº“: `sqlite3 backend/terminal_sessions.db`
- æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œ

### ç”Ÿäº§ç¯å¢ƒ

è¯¦ç»†çš„æ•…éšœæ’æŸ¥æ­¥éª¤è¯·å‚è€ƒä¸Šæ–¹"ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²"ç« èŠ‚ä¸­çš„"æ•…éšœæ’æŸ¥"éƒ¨åˆ†ã€‚

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-02-06)

- âœ… å®Œæ•´çš„å¤šç”¨æˆ·ç»ˆç«¯ç³»ç»Ÿ
- âœ… åå°æŒç»­è¿è¡Œæ”¯æŒ
- âœ… å¤šå®¢æˆ·ç«¯å®æ—¶åŒæ­¥
- âœ… å®Œæ•´çš„æ•°æ®æŒä¹…åŒ–
- âœ… è‡ªåŠ¨é‡è¿æœºåˆ¶
- âœ… å…¨å±æ¨¡å¼
- âœ… äº¤äº’å¼ CLI å®Œç¾æ”¯æŒ

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**æ–‡æ¡£:** [PROJECT_DOCUMENTATION.md](PROJECT_DOCUMENTATION.md)  
**ç‰ˆæœ¬:** 1.0.0  
**æ›´æ–°:** 2026-02-06
